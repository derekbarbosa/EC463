#include <msp430.h> 


/**
 * main.c
 */

bool buttonS1Pressed;
bool buttonS2Pressed;
bool rtcWakeup;

int signal_SOS(void){
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);

    P1OUT ^= BIT1;
    __delay_cycles(32000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(32000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(32000000);
    P1OUT ^= BIT1;

    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
    P1OUT ^= BIT1;
    __delay_cycles(16000000);
}

int main(void)
{
    WDTCTL = WDTPW | WDTHOLD;

    HAL_System_Init();
    HAL_IO_InitButtons();
    initRtc();
    initAdc();

    signal_SOS();

    P2IFG &= ~(BIT3 | BIT7);

    unsigned int select = 0;
    buttonS1Pressed = false;
    buttonS2Pressed = false;
    rtcWakeup = false;

    __enable_interrupt();


    while(1){
        if((P1IN & BIT3)!=BIT3)
        {
            __delay_cycles(220000);
            P1OUT ^= BIT0;
            select++;
        }
    }
	return 0;
}
